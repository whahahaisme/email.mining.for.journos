
R version 3.0.2 (2013-09-25) -- "Frisbee Sailing"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-redhat-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # Copyright (C) 2013 by M. Edward (Ed) Borasky
> #
> # This program is licensed to you under the terms of version 3 of the
> # GNU Affero General Public License. This program is distributed WITHOUT
> # ANY EXPRESS OR IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT,
> # MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the
> # AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.
> #
> 
> # clean slate
> ls(); rm(list = ls()); gc()
character(0)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 182198  9.8     407500 21.8   338731 18.1
Vcells 277882  2.2     786432  6.0   786409  6.0
> 
> old.mc.cores <- options(mc.cores = 1) # set to 1 for debugging
> gcinfo(FALSE) # set to TRUE to see impact of low RAM
[1] FALSE
> 
> # libraries needed
> library(email.mining.for.journos)
> library(tm)
> 
> # make and save the corpus
> print(date())
[1] "Tue Dec 17 02:24:17 2013"
> enron.corpus <- make.email.corpus('/data/enron')
There were 50 or more warnings (use warnings() to see the first 50)
> print(date())
[1] "Tue Dec 17 02:36:45 2013"
> print(summary(enron.corpus))
A corpus with 517424 text documents

The metadata consists of 2 tag-value pairs and a data frame
Available tags are:
  create_date creator 
Available variables in the data frame are:
  MetaID 
NULL
> save(enron.corpus, file = '/data/enron-corpus.rda', compress = 'xz')
> 
> # now make and save Document-Term Matrix
> print(date())
[1] "Tue Dec 17 02:56:49 2013"
> enron.dtm <- DocumentTermMatrix(
+   clean.email.corpus(enron.corpus),
+   control = list(
+     tolower = FALSE, 
+     wordLengths = c(3, Inf)
+   )
+ )
> print(date())
[1] "Tue Dec 17 03:48:20 2013"
> save(enron.dtm, file = '/data/enron-dtm.rda', compress = 'xz')
> 
> # Top 20 Authors
> enron.authors <- lapply(enron.corpus, Author)
> enron.authors <- sapply(enron.authors, paste, collapse = " ")
> print(sort(table(enron.authors), decreasing = TRUE)[1:20])
enron.authors
           kay.mann@enron.com      vince.kaminski@enron.com 
                        16735                         14368 
      jeff.dasovich@enron.com          pete.davis@enron.com 
                        11411                          9149 
      chris.germany@enron.com     sara.shackleton@enron.com 
                         8801                          8777 
enron.announcements@enron.com          tana.jones@enron.com 
                         8587                          8490 
        steven.kean@enron.com          kate.symes@enron.com 
                         6759                          5438 
    matthew.lenhart@enron.com           eric.bass@enron.com 
                         5265                          5158 
         no.address@enron.com   debra.perlingiere@enron.com 
                         5112                          4387 
         sally.beck@enron.com         mark.taylor@enron.com 
                         4343                          4111 
        susan.scott@enron.com        gerald.nemec@enron.com 
                         4000                          3888 
        drew.fossum@enron.com         john.arnold@enron.com 
                         3706                          3578 
> 
> # Top 20 Headings
> enron.headings <- lapply(enron.corpus, Heading)
> enron.headings <- sapply(enron.headings, paste, collapse = " ")
> print(sort(table(enron.headings), decreasing = TRUE)[1:20])
enron.headings
                                                      
                                                19191 
                                                  RE: 
                                                 6495 
                                                  Re: 
                                                 6308 
Demand Ken Lay Donate Proceeds from Enron Stock Sales 
                                                 1124 
                                                  FW: 
                                                  938 
                  Schedule Crawler: HourAhead Failure 
                                                  900 
       Schedule Crawler: HourAhead Failure <CODESITE> 
                                                  800 
                                       Enron Mentions 
                                                  782 
                                   EnTouch Newsletter 
                                                  518 
                          Organizational Announcement 
                                                  378 
                                        Energy Issues 
                                                  369 
  Williams Energy News Live -- today's video newscast 
                                                  344 
                               Organizational Changes 
                                                  329 
                   Mid-Year 2001 Performance Feedback 
                                                  273 
                                        Power Indices 
                                                  267 
 WARNING:  Your mailbox is approaching the size limit 
                                                  263 
                                         (no subject) 
                                                  260 
         Your Approval is Overdue: Access Request for 
                                                  253 
                                     Re: apb checkout 
                                                  249 
                                      Congratulations 
                                                  245 
> 
5331.86user 38.52system 1:30:55elapsed 98%CPU (0avgtext+0avgdata 19117120maxresident)k
5624264inputs+583248outputs (0major+5703773minor)pagefaults 0swaps
