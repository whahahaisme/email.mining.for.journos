
R version 3.0.2 (2013-09-25) -- "Frisbee Sailing"
Copyright (C) 2013 The R Foundation for Statistical Computing
Platform: x86_64-redhat-linux-gnu (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> # Copyright (C) 2013 by M. Edward (Ed) Borasky
> #
> # This program is licensed to you under the terms of version 3 of the
> # GNU Affero General Public License. This program is distributed WITHOUT
> # ANY EXPRESS OR IMPLIED WARRANTY, INCLUDING THOSE OF NON-INFRINGEMENT,
> # MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. Please refer to the
> # AGPL (http://www.gnu.org/licenses/agpl-3.0.txt) for more details.
> #
> 
> # clean slate
> ls(); rm(list = ls()); gc()
character(0)
         used (Mb) gc trigger (Mb) max used (Mb)
Ncells 182198  9.8     407500 21.8   338731 18.1
Vcells 277882  2.2     786432  6.0   786409  6.0
> 
> old.mc.cores <- options(mc.cores = 1) # set to 1 for debugging
> gcinfo(FALSE) # set to TRUE to see impact of low RAM
[1] FALSE
> 
> # libraries needed
> library(email.mining.for.journos)
> library(tm)
> 
> # make and save the corpus
> print(date())
[1] "Tue Dec 17 02:16:30 2013"
> inboxes.corpus <- make.email.corpus('/data/inboxes')
There were 50 or more warnings (use warnings() to see the first 50)
> print(date())
[1] "Tue Dec 17 02:17:32 2013"
> print(summary(inboxes.corpus))
A corpus with 44871 text documents

The metadata consists of 2 tag-value pairs and a data frame
Available tags are:
  create_date creator 
Available variables in the data frame are:
  MetaID 
NULL
> save(inboxes.corpus, file = '/data/inboxes-corpus.rda', compress = 'xz')
> 
> # now make and save Document-Term Matrix
> print(date())
[1] "Tue Dec 17 02:19:20 2013"
> inboxes.dtm <- DocumentTermMatrix(
+   clean.email.corpus(inboxes.corpus),
+   control = list(
+     tolower = FALSE, 
+     wordLengths = c(3, Inf)
+   )
+ )
> print(date())
[1] "Tue Dec 17 02:23:39 2013"
> save(inboxes.dtm, file = '/data/inboxes-dtm.rda', compress = 'xz')
> 
> # Top 20 Authors
> inboxes.authors <- lapply(inboxes.corpus, Author)
> inboxes.authors <- sapply(inboxes.authors, paste, collapse = " ")
> print(sort(table(inboxes.authors), decreasing = TRUE)[1:20])
inboxes.authors
               no.address@enron.com                   40enron@enron.com 
                               2059                                1250 
               pete.davis@enron.com       announcements.enron@enron.com 
                                722                                 422 
                jae.black@enron.com                 mary.cook@enron.com 
                                333                                 240 
  enron_update@concureworkplace.com                  feedback@intcx.com 
                                229                                 210 
             chairman.ken@enron.com          arsystem@mailman.enron.com 
                                201                                 195 
             mike.grigsby@enron.com               soblander@carrfut.com 
                                194                                 186 
        gelliott@industrialinfo.com        kenneth.thibodeaux@enron.com 
                                184                                 167 
noreply@ccomad3.uu.commissioner.com              rod.hayslett@enron.com 
                                143                                 141 
               ecenter@williams.com              newsletter@rigzone.com 
                                131                                 131 
            karen.buckley@enron.com                    al@friedwire.com 
                                125                                 121 
> 
> # Top 20 Headings
> inboxes.headings <- lapply(inboxes.corpus, Heading)
> inboxes.headings <- sapply(inboxes.headings, paste, collapse = " ")
> print(sort(table(inboxes.headings), decreasing = TRUE)[1:20])
inboxes.headings
                                                               
                                                           909 
                                                           RE: 
                                                           309 
                                                           FW: 
                                                           174 
           Williams Energy News Live -- today's video newscast 
                                                           130 
                                         RIGZONE Industry News 
                                                           117 
                                                Enron Mentions 
                                                           106 
Lexis-Nexis Training: Houston & Worldwide / Dow Jones Training 
                                                            99 
                Schedule Crawler: HourAhead Failure <CODESITE> 
                                                            97 
                                                 Power Indices 
                                                            94 
                                            EnTouch Newsletter 
                                                            89 
                                                   Gas Indices 
                                                            80 
                         Daily Outage Updates (excluding WSCC) 
                                                            65 
                         Enron/Dynegy Merger; Antitrust Issues 
                                                            61 
                                          Update to Merger Q&A 
                                                            58 
                                   Organizational Announcement 
                                                            57 
                            Mid-Year 2001 Performance Feedback 
                                                            53 
 Please Read: Resolution Center to Disconnect Toll Free number 
                                                            48 
                                                  Daily Update 
                                                            47 
                        Expense Reports Awaiting Your Approval 
                                                            47 
                                                           Re: 
                                                            46 
> 
455.79user 3.76system 7:47.19elapsed 98%CPU (0avgtext+0avgdata 2435280maxresident)k
595104inputs+53840outputs (0major+544168minor)pagefaults 0swaps
